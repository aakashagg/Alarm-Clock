{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"date-fns","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":93},"end":{"line":3,"column":86,"index":179}}],"key":"ebLIABIqb+DSfRpTozlXmEt3BvY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"scheduleAlarmNotification\", {\n    enumerable: true,\n    get: function () {\n      return scheduleAlarmNotification;\n    }\n  });\n  Object.defineProperty(exports, \"cancelAlarmNotification\", {\n    enumerable: true,\n    get: function () {\n      return cancelAlarmNotification;\n    }\n  });\n  Object.defineProperty(exports, \"cancelAllAlarms\", {\n    enumerable: true,\n    get: function () {\n      return cancelAllAlarms;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoNotifications = require(_dependencyMap[1], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _dateFns = require(_dependencyMap[2], \"date-fns\");\n  // Get next trigger time for alarm in IST\n  var getNextTriggerTime = alarm => {\n    var now = new Date();\n\n    // Create a date object for today with the alarm time\n    var triggerDate = (0, _dateFns.setSeconds)((0, _dateFns.setMinutes)((0, _dateFns.setHours)(now, alarm.hour), alarm.minute), 0);\n\n    // If the time has already passed today, schedule for tomorrow\n    if (!(0, _dateFns.isAfter)(triggerDate, now)) {\n      triggerDate = (0, _dateFns.addDays)(triggerDate, 1);\n    }\n    return triggerDate;\n  };\n  var scheduleAlarmNotification = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* (alarm) {\n      try {\n        var triggerDate = getNextTriggerTime(alarm);\n        var notificationId = yield Notifications.scheduleNotificationAsync({\n          content: {\n            title: alarm.label || 'Alarm',\n            body: 'Time to wake up! Type \"yes i am awake\" to stop.',\n            sound: true,\n            priority: Notifications.AndroidNotificationPriority.MAX,\n            vibrate: [0, 250, 250, 250],\n            data: {\n              alarmId: alarm.id,\n              type: 'alarm'\n            }\n          },\n          trigger: triggerDate\n        });\n        console.log(`Alarm ${alarm.id} scheduled for ${(0, _dateFns.format)(triggerDate, 'PPpp')}`);\n        return notificationId;\n      } catch (error) {\n        console.error('Error scheduling alarm:', error);\n        return undefined;\n      }\n    });\n    return function scheduleAlarmNotification(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var cancelAlarmNotification = /*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator.default)(function* (alarmId) {\n      try {\n        var scheduledNotifications = yield Notifications.getAllScheduledNotificationsAsync();\n        for (var notification of scheduledNotifications) {\n          if (notification.content.data?.alarmId === alarmId) {\n            yield Notifications.cancelScheduledNotificationAsync(notification.identifier);\n            console.log(`Cancelled notification for alarm ${alarmId}`);\n          }\n        }\n      } catch (error) {\n        console.error('Error cancelling alarm:', error);\n      }\n    });\n    return function cancelAlarmNotification(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var cancelAllAlarms = /*#__PURE__*/function () {\n    var _ref3 = (0, _asyncToGenerator.default)(function* () {\n      try {\n        yield Notifications.cancelAllScheduledNotificationsAsync();\n        console.log('All alarms cancelled');\n      } catch (error) {\n        console.error('Error cancelling all alarms:', error);\n      }\n    });\n    return function cancelAllAlarms() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n});","lineCount":123,"map":[[27,2,20,0,"Object"],[27,8,20,0],[27,9,20,0,"defineProperty"],[27,23,20,0],[27,24,20,0,"exports"],[27,31,20,0],[28,4,20,0,"enumerable"],[28,14,20,0],[29,4,20,0,"get"],[29,7,20,0],[29,18,20,0,"get"],[29,19,20,0],[30,6,20,0],[30,13,20,0,"scheduleAlarmNotification"],[30,38,20,0],[31,4,20,0],[32,2,20,0],[33,2,47,0,"Object"],[33,8,47,0],[33,9,47,0,"defineProperty"],[33,23,47,0],[33,24,47,0,"exports"],[33,31,47,0],[34,4,47,0,"enumerable"],[34,14,47,0],[35,4,47,0,"get"],[35,7,47,0],[35,18,47,0,"get"],[35,19,47,0],[36,6,47,0],[36,13,47,0,"cancelAlarmNotification"],[36,36,47,0],[37,4,47,0],[38,2,47,0],[39,2,62,0,"Object"],[39,8,62,0],[39,9,62,0,"defineProperty"],[39,23,62,0],[39,24,62,0,"exports"],[39,31,62,0],[40,4,62,0,"enumerable"],[40,14,62,0],[41,4,62,0,"get"],[41,7,62,0],[41,18,62,0,"get"],[41,19,62,0],[42,6,62,0],[42,13,62,0,"cancelAllAlarms"],[42,28,62,0],[43,4,62,0],[44,2,62,0],[45,2,69,2],[45,6,69,2,"_babelRuntimeHelpersAsyncToGenerator"],[45,42,69,2],[45,45,69,2,"require"],[45,52,69,2],[45,53,69,2,"_dependencyMap"],[45,67,69,2],[46,2,69,2],[46,6,69,2,"_asyncToGenerator"],[46,23,69,2],[46,26,69,2,"_interopDefault"],[46,41,69,2],[46,42,69,2,"_babelRuntimeHelpersAsyncToGenerator"],[46,78,69,2],[47,2,1,0],[47,6,1,0,"_expoNotifications"],[47,24,1,0],[47,27,1,0,"require"],[47,34,1,0],[47,35,1,0,"_dependencyMap"],[47,49,1,0],[48,2,1,0],[48,6,1,0,"Notifications"],[48,19,1,0],[48,22,1,0,"_interopNamespace"],[48,39,1,0],[48,40,1,0,"_expoNotifications"],[48,58,1,0],[49,2,3,0],[49,6,3,0,"_dateFns"],[49,14,3,0],[49,17,3,0,"require"],[49,24,3,0],[49,25,3,0,"_dependencyMap"],[49,39,3,0],[50,2,5,0],[51,2,6,0],[51,6,6,6,"getNextTriggerTime"],[51,24,6,24],[51,27,6,28,"alarm"],[51,32,6,40],[51,36,6,51],[52,4,7,2],[52,8,7,8,"now"],[52,11,7,11],[52,14,7,14],[52,18,7,18,"Date"],[52,22,7,22],[52,23,7,23],[52,24,7,24],[54,4,9,2],[55,4,10,2],[55,8,10,6,"triggerDate"],[55,19,10,17],[55,22,10,20],[55,26,10,20,"setSeconds"],[55,34,10,30],[55,35,10,30,"setSeconds"],[55,45,10,30],[55,47,10,31],[55,51,10,31,"setMinutes"],[55,59,10,41],[55,60,10,41,"setMinutes"],[55,70,10,41],[55,72,10,42],[55,76,10,42,"setHours"],[55,84,10,50],[55,85,10,50,"setHours"],[55,93,10,50],[55,95,10,51,"now"],[55,98,10,54],[55,100,10,56,"alarm"],[55,105,10,61],[55,106,10,62,"hour"],[55,110,10,66],[55,111,10,67],[55,113,10,69,"alarm"],[55,118,10,74],[55,119,10,75,"minute"],[55,125,10,81],[55,126,10,82],[55,128,10,84],[55,129,10,85],[55,130,10,86],[57,4,12,2],[58,4,13,2],[58,8,13,6],[58,9,13,7],[58,13,13,7,"isAfter"],[58,21,13,14],[58,22,13,14,"isAfter"],[58,29,13,14],[58,31,13,15,"triggerDate"],[58,42,13,26],[58,44,13,28,"now"],[58,47,13,31],[58,48,13,32],[58,50,13,34],[59,6,14,4,"triggerDate"],[59,17,14,15],[59,20,14,18],[59,24,14,18,"addDays"],[59,32,14,25],[59,33,14,25,"addDays"],[59,40,14,25],[59,42,14,26,"triggerDate"],[59,53,14,37],[59,55,14,39],[59,56,14,40],[59,57,14,41],[60,4,15,2],[61,4,17,2],[61,11,17,9,"triggerDate"],[61,22,17,20],[62,2,18,0],[62,3,18,1],[63,2,20,7],[63,6,20,13,"scheduleAlarmNotification"],[63,31,20,38],[64,4,20,38],[64,8,20,38,"_ref"],[64,12,20,38],[64,19,20,38,"_asyncToGenerator"],[64,36,20,38],[64,37,20,38,"default"],[64,44,20,38],[64,46,20,41],[64,57,20,48,"alarm"],[64,62,20,60],[64,64,20,94],[65,6,21,2],[65,10,21,6],[66,8,22,4],[66,12,22,10,"triggerDate"],[66,23,22,21],[66,26,22,24,"getNextTriggerTime"],[66,44,22,42],[66,45,22,43,"alarm"],[66,50,22,48],[66,51,22,49],[67,8,24,4],[67,12,24,10,"notificationId"],[67,26,24,24],[67,35,24,33,"Notifications"],[67,48,24,46],[67,49,24,47,"scheduleNotificationAsync"],[67,74,24,72],[67,75,24,73],[68,10,25,6,"content"],[68,17,25,13],[68,19,25,15],[69,12,26,8,"title"],[69,17,26,13],[69,19,26,15,"alarm"],[69,24,26,20],[69,25,26,21,"label"],[69,30,26,26],[69,34,26,30],[69,41,26,37],[70,12,27,8,"body"],[70,16,27,12],[70,18,27,14],[70,67,27,63],[71,12,28,8,"sound"],[71,17,28,13],[71,19,28,15],[71,23,28,19],[72,12,29,8,"priority"],[72,20,29,16],[72,22,29,18,"Notifications"],[72,35,29,31],[72,36,29,32,"AndroidNotificationPriority"],[72,63,29,59],[72,64,29,60,"MAX"],[72,67,29,63],[73,12,30,8,"vibrate"],[73,19,30,15],[73,21,30,17],[73,22,30,18],[73,23,30,19],[73,25,30,21],[73,28,30,24],[73,30,30,26],[73,33,30,29],[73,35,30,31],[73,38,30,34],[73,39,30,35],[74,12,31,8,"data"],[74,16,31,12],[74,18,31,14],[75,14,32,10,"alarmId"],[75,21,32,17],[75,23,32,19,"alarm"],[75,28,32,24],[75,29,32,25,"id"],[75,31,32,27],[76,14,33,10,"type"],[76,18,33,14],[76,20,33,16],[77,12,34,8],[78,10,35,6],[78,11,35,7],[79,10,36,6,"trigger"],[79,17,36,13],[79,19,36,15,"triggerDate"],[80,8,37,4],[80,9,37,5],[80,10,37,6],[81,8,39,4,"console"],[81,15,39,11],[81,16,39,12,"log"],[81,19,39,15],[81,20,39,16],[81,29,39,25,"alarm"],[81,34,39,30],[81,35,39,31,"id"],[81,37,39,33],[81,55,39,51],[81,59,39,51,"format"],[81,67,39,57],[81,68,39,57,"format"],[81,74,39,57],[81,76,39,58,"triggerDate"],[81,87,39,69],[81,89,39,71],[81,95,39,77],[81,96,39,78],[81,98,39,80],[81,99,39,81],[82,8,40,4],[82,15,40,11,"notificationId"],[82,29,40,25],[83,6,41,2],[83,7,41,3],[83,8,41,4],[83,15,41,11,"error"],[83,20,41,16],[83,22,41,18],[84,8,42,4,"console"],[84,15,42,11],[84,16,42,12,"error"],[84,21,42,17],[84,22,42,18],[84,47,42,43],[84,49,42,45,"error"],[84,54,42,50],[84,55,42,51],[85,8,43,4],[85,15,43,11,"undefined"],[85,24,43,20],[86,6,44,2],[87,4,45,0],[87,5,45,1],[88,4,45,1],[88,20,20,13,"scheduleAlarmNotification"],[88,45,20,38,"scheduleAlarmNotification"],[88,46,20,38,"_x"],[88,48,20,38],[89,6,20,38],[89,13,20,38,"_ref"],[89,17,20,38],[89,18,20,38,"apply"],[89,23,20,38],[89,30,20,38,"arguments"],[89,39,20,38],[90,4,20,38],[91,2,20,38],[91,5,45,1],[92,2,47,7],[92,6,47,13,"cancelAlarmNotification"],[92,29,47,36],[93,4,47,36],[93,8,47,36,"_ref2"],[93,13,47,36],[93,20,47,36,"_asyncToGenerator"],[93,37,47,36],[93,38,47,36,"default"],[93,45,47,36],[93,47,47,39],[93,58,47,46,"alarmId"],[93,65,47,61],[93,67,47,81],[94,6,48,2],[94,10,48,6],[95,8,49,4],[95,12,49,10,"scheduledNotifications"],[95,34,49,32],[95,43,49,41,"Notifications"],[95,56,49,54],[95,57,49,55,"getAllScheduledNotificationsAsync"],[95,90,49,88],[95,91,49,89],[95,92,49,90],[96,8,51,4],[96,13,51,9],[96,17,51,15,"notification"],[96,29,51,27],[96,33,51,31,"scheduledNotifications"],[96,55,51,53],[96,57,51,55],[97,10,52,6],[97,14,52,10,"notification"],[97,26,52,22],[97,27,52,23,"content"],[97,34,52,30],[97,35,52,31,"data"],[97,39,52,35],[97,41,52,37,"alarmId"],[97,48,52,44],[97,53,52,49,"alarmId"],[97,60,52,56],[97,62,52,58],[98,12,53,8],[98,18,53,14,"Notifications"],[98,31,53,27],[98,32,53,28,"cancelScheduledNotificationAsync"],[98,64,53,60],[98,65,53,61,"notification"],[98,77,53,73],[98,78,53,74,"identifier"],[98,88,53,84],[98,89,53,85],[99,12,54,8,"console"],[99,19,54,15],[99,20,54,16,"log"],[99,23,54,19],[99,24,54,20],[99,60,54,56,"alarmId"],[99,67,54,63],[99,69,54,65],[99,70,54,66],[100,10,55,6],[101,8,56,4],[102,6,57,2],[102,7,57,3],[102,8,57,4],[102,15,57,11,"error"],[102,20,57,16],[102,22,57,18],[103,8,58,4,"console"],[103,15,58,11],[103,16,58,12,"error"],[103,21,58,17],[103,22,58,18],[103,47,58,43],[103,49,58,45,"error"],[103,54,58,50],[103,55,58,51],[104,6,59,2],[105,4,60,0],[105,5,60,1],[106,4,60,1],[106,20,47,13,"cancelAlarmNotification"],[106,43,47,36,"cancelAlarmNotification"],[106,44,47,36,"_x2"],[106,47,47,36],[107,6,47,36],[107,13,47,36,"_ref2"],[107,18,47,36],[107,19,47,36,"apply"],[107,24,47,36],[107,31,47,36,"arguments"],[107,40,47,36],[108,4,47,36],[109,2,47,36],[109,5,60,1],[110,2,62,7],[110,6,62,13,"cancelAllAlarms"],[110,21,62,28],[111,4,62,28],[111,8,62,28,"_ref3"],[111,13,62,28],[111,20,62,28,"_asyncToGenerator"],[111,37,62,28],[111,38,62,28,"default"],[111,45,62,28],[111,47,62,31],[111,60,62,58],[112,6,63,2],[112,10,63,6],[113,8,64,4],[113,14,64,10,"Notifications"],[113,27,64,23],[113,28,64,24,"cancelAllScheduledNotificationsAsync"],[113,64,64,60],[113,65,64,61],[113,66,64,62],[114,8,65,4,"console"],[114,15,65,11],[114,16,65,12,"log"],[114,19,65,15],[114,20,65,16],[114,42,65,38],[114,43,65,39],[115,6,66,2],[115,7,66,3],[115,8,66,4],[115,15,66,11,"error"],[115,20,66,16],[115,22,66,18],[116,8,67,4,"console"],[116,15,67,11],[116,16,67,12,"error"],[116,21,67,17],[116,22,67,18],[116,52,67,48],[116,54,67,50,"error"],[116,59,67,55],[116,60,67,56],[117,6,68,2],[118,4,69,0],[118,5,69,1],[119,4,69,1],[119,20,62,13,"cancelAllAlarms"],[119,35,62,28,"cancelAllAlarms"],[119,36,62,28],[120,6,62,28],[120,13,62,28,"_ref3"],[120,18,62,28],[120,19,62,28,"apply"],[120,24,62,28],[120,31,62,28,"arguments"],[120,40,62,28],[121,4,62,28],[122,2,62,28],[122,5,69,1],[123,0,69,2],[123,3]],"functionMap":{"names":["<global>","getNextTriggerTime","scheduleAlarmNotification","cancelAlarmNotification","cancelAllAlarms"],"mappings":"AAA;2BCK;CDY;yCEE;CFyB;uCGE;CHa;+BIE;CJO"},"hasCjsExports":false},"type":"js/module"}]}