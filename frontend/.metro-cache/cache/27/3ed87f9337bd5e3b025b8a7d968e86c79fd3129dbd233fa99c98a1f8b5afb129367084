{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"date-fns","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":93},"end":{"line":3,"column":86,"index":179}}],"key":"ebLIABIqb+DSfRpTozlXmEt3BvY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"scheduleAlarmNotification\", {\n    enumerable: true,\n    get: function () {\n      return scheduleAlarmNotification;\n    }\n  });\n  Object.defineProperty(exports, \"cancelAlarmNotification\", {\n    enumerable: true,\n    get: function () {\n      return cancelAlarmNotification;\n    }\n  });\n  Object.defineProperty(exports, \"cancelAllAlarms\", {\n    enumerable: true,\n    get: function () {\n      return cancelAllAlarms;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoNotifications = require(_dependencyMap[1], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _dateFns = require(_dependencyMap[2], \"date-fns\");\n  // Get next trigger time for alarm in IST\n  var getNextTriggerTime = alarm => {\n    var now = new Date();\n\n    // Create a date object for today with the alarm time\n    var triggerDate = (0, _dateFns.setSeconds)((0, _dateFns.setMinutes)((0, _dateFns.setHours)(now, alarm.hour), alarm.minute), 0);\n\n    // If the time has already passed today, schedule for tomorrow\n    if (!(0, _dateFns.isAfter)(triggerDate, now)) {\n      triggerDate = (0, _dateFns.addDays)(triggerDate, 1);\n    }\n    return triggerDate;\n  };\n  var scheduleAlarmNotification = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* (alarm) {\n      try {\n        var triggerDate = getNextTriggerTime(alarm);\n        var notificationId = yield Notifications.scheduleNotificationAsync({\n          content: {\n            title: alarm.label || 'Alarm',\n            body: 'Time to wake up! Type \"yes i am awake\" to stop.',\n            sound: true,\n            priority: Notifications.AndroidNotificationPriority.MAX,\n            vibrate: [0, 250, 250, 250],\n            data: {\n              alarmId: alarm.id,\n              type: 'alarm'\n            }\n          },\n          trigger: {\n            date: triggerDate,\n            channelId: 'alarm'\n          }\n        });\n        console.log(`Alarm ${alarm.id} scheduled for ${(0, _dateFns.format)(triggerDate, 'PPpp')}`);\n        return notificationId;\n      } catch (error) {\n        console.error('Error scheduling alarm:', error);\n        return undefined;\n      }\n    });\n    return function scheduleAlarmNotification(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var cancelAlarmNotification = /*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator.default)(function* (alarmId) {\n      try {\n        var scheduledNotifications = yield Notifications.getAllScheduledNotificationsAsync();\n        for (var notification of scheduledNotifications) {\n          if (notification.content.data?.alarmId === alarmId) {\n            yield Notifications.cancelScheduledNotificationAsync(notification.identifier);\n            console.log(`Cancelled notification for alarm ${alarmId}`);\n          }\n        }\n      } catch (error) {\n        console.error('Error cancelling alarm:', error);\n      }\n    });\n    return function cancelAlarmNotification(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var cancelAllAlarms = /*#__PURE__*/function () {\n    var _ref3 = (0, _asyncToGenerator.default)(function* () {\n      try {\n        yield Notifications.cancelAllScheduledNotificationsAsync();\n        console.log('All alarms cancelled');\n      } catch (error) {\n        console.error('Error cancelling all alarms:', error);\n      }\n    });\n    return function cancelAllAlarms() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n});","lineCount":126,"map":[[27,2,20,0,"Object"],[27,8,20,0],[27,9,20,0,"defineProperty"],[27,23,20,0],[27,24,20,0,"exports"],[27,31,20,0],[28,4,20,0,"enumerable"],[28,14,20,0],[29,4,20,0,"get"],[29,7,20,0],[29,18,20,0,"get"],[29,19,20,0],[30,6,20,0],[30,13,20,0,"scheduleAlarmNotification"],[30,38,20,0],[31,4,20,0],[32,2,20,0],[33,2,50,0,"Object"],[33,8,50,0],[33,9,50,0,"defineProperty"],[33,23,50,0],[33,24,50,0,"exports"],[33,31,50,0],[34,4,50,0,"enumerable"],[34,14,50,0],[35,4,50,0,"get"],[35,7,50,0],[35,18,50,0,"get"],[35,19,50,0],[36,6,50,0],[36,13,50,0,"cancelAlarmNotification"],[36,36,50,0],[37,4,50,0],[38,2,50,0],[39,2,65,0,"Object"],[39,8,65,0],[39,9,65,0,"defineProperty"],[39,23,65,0],[39,24,65,0,"exports"],[39,31,65,0],[40,4,65,0,"enumerable"],[40,14,65,0],[41,4,65,0,"get"],[41,7,65,0],[41,18,65,0,"get"],[41,19,65,0],[42,6,65,0],[42,13,65,0,"cancelAllAlarms"],[42,28,65,0],[43,4,65,0],[44,2,65,0],[45,2,72,2],[45,6,72,2,"_babelRuntimeHelpersAsyncToGenerator"],[45,42,72,2],[45,45,72,2,"require"],[45,52,72,2],[45,53,72,2,"_dependencyMap"],[45,67,72,2],[46,2,72,2],[46,6,72,2,"_asyncToGenerator"],[46,23,72,2],[46,26,72,2,"_interopDefault"],[46,41,72,2],[46,42,72,2,"_babelRuntimeHelpersAsyncToGenerator"],[46,78,72,2],[47,2,1,0],[47,6,1,0,"_expoNotifications"],[47,24,1,0],[47,27,1,0,"require"],[47,34,1,0],[47,35,1,0,"_dependencyMap"],[47,49,1,0],[48,2,1,0],[48,6,1,0,"Notifications"],[48,19,1,0],[48,22,1,0,"_interopNamespace"],[48,39,1,0],[48,40,1,0,"_expoNotifications"],[48,58,1,0],[49,2,3,0],[49,6,3,0,"_dateFns"],[49,14,3,0],[49,17,3,0,"require"],[49,24,3,0],[49,25,3,0,"_dependencyMap"],[49,39,3,0],[50,2,5,0],[51,2,6,0],[51,6,6,6,"getNextTriggerTime"],[51,24,6,24],[51,27,6,28,"alarm"],[51,32,6,40],[51,36,6,51],[52,4,7,2],[52,8,7,8,"now"],[52,11,7,11],[52,14,7,14],[52,18,7,18,"Date"],[52,22,7,22],[52,23,7,23],[52,24,7,24],[54,4,9,2],[55,4,10,2],[55,8,10,6,"triggerDate"],[55,19,10,17],[55,22,10,20],[55,26,10,20,"setSeconds"],[55,34,10,30],[55,35,10,30,"setSeconds"],[55,45,10,30],[55,47,10,31],[55,51,10,31,"setMinutes"],[55,59,10,41],[55,60,10,41,"setMinutes"],[55,70,10,41],[55,72,10,42],[55,76,10,42,"setHours"],[55,84,10,50],[55,85,10,50,"setHours"],[55,93,10,50],[55,95,10,51,"now"],[55,98,10,54],[55,100,10,56,"alarm"],[55,105,10,61],[55,106,10,62,"hour"],[55,110,10,66],[55,111,10,67],[55,113,10,69,"alarm"],[55,118,10,74],[55,119,10,75,"minute"],[55,125,10,81],[55,126,10,82],[55,128,10,84],[55,129,10,85],[55,130,10,86],[57,4,12,2],[58,4,13,2],[58,8,13,6],[58,9,13,7],[58,13,13,7,"isAfter"],[58,21,13,14],[58,22,13,14,"isAfter"],[58,29,13,14],[58,31,13,15,"triggerDate"],[58,42,13,26],[58,44,13,28,"now"],[58,47,13,31],[58,48,13,32],[58,50,13,34],[59,6,14,4,"triggerDate"],[59,17,14,15],[59,20,14,18],[59,24,14,18,"addDays"],[59,32,14,25],[59,33,14,25,"addDays"],[59,40,14,25],[59,42,14,26,"triggerDate"],[59,53,14,37],[59,55,14,39],[59,56,14,40],[59,57,14,41],[60,4,15,2],[61,4,17,2],[61,11,17,9,"triggerDate"],[61,22,17,20],[62,2,18,0],[62,3,18,1],[63,2,20,7],[63,6,20,13,"scheduleAlarmNotification"],[63,31,20,38],[64,4,20,38],[64,8,20,38,"_ref"],[64,12,20,38],[64,19,20,38,"_asyncToGenerator"],[64,36,20,38],[64,37,20,38,"default"],[64,44,20,38],[64,46,20,41],[64,57,20,48,"alarm"],[64,62,20,60],[64,64,20,94],[65,6,21,2],[65,10,21,6],[66,8,22,4],[66,12,22,10,"triggerDate"],[66,23,22,21],[66,26,22,24,"getNextTriggerTime"],[66,44,22,42],[66,45,22,43,"alarm"],[66,50,22,48],[66,51,22,49],[67,8,24,4],[67,12,24,10,"notificationId"],[67,26,24,24],[67,35,24,33,"Notifications"],[67,48,24,46],[67,49,24,47,"scheduleNotificationAsync"],[67,74,24,72],[67,75,24,73],[68,10,25,6,"content"],[68,17,25,13],[68,19,25,15],[69,12,26,8,"title"],[69,17,26,13],[69,19,26,15,"alarm"],[69,24,26,20],[69,25,26,21,"label"],[69,30,26,26],[69,34,26,30],[69,41,26,37],[70,12,27,8,"body"],[70,16,27,12],[70,18,27,14],[70,67,27,63],[71,12,28,8,"sound"],[71,17,28,13],[71,19,28,15],[71,23,28,19],[72,12,29,8,"priority"],[72,20,29,16],[72,22,29,18,"Notifications"],[72,35,29,31],[72,36,29,32,"AndroidNotificationPriority"],[72,63,29,59],[72,64,29,60,"MAX"],[72,67,29,63],[73,12,30,8,"vibrate"],[73,19,30,15],[73,21,30,17],[73,22,30,18],[73,23,30,19],[73,25,30,21],[73,28,30,24],[73,30,30,26],[73,33,30,29],[73,35,30,31],[73,38,30,34],[73,39,30,35],[74,12,31,8,"data"],[74,16,31,12],[74,18,31,14],[75,14,32,10,"alarmId"],[75,21,32,17],[75,23,32,19,"alarm"],[75,28,32,24],[75,29,32,25,"id"],[75,31,32,27],[76,14,33,10,"type"],[76,18,33,14],[76,20,33,16],[77,12,34,8],[78,10,35,6],[78,11,35,7],[79,10,36,6,"trigger"],[79,17,36,13],[79,19,36,15],[80,12,37,8,"date"],[80,16,37,12],[80,18,37,14,"triggerDate"],[80,29,37,25],[81,12,38,8,"channelId"],[81,21,38,17],[81,23,38,19],[82,10,39,6],[83,8,40,4],[83,9,40,5],[83,10,40,6],[84,8,42,4,"console"],[84,15,42,11],[84,16,42,12,"log"],[84,19,42,15],[84,20,42,16],[84,29,42,25,"alarm"],[84,34,42,30],[84,35,42,31,"id"],[84,37,42,33],[84,55,42,51],[84,59,42,51,"format"],[84,67,42,57],[84,68,42,57,"format"],[84,74,42,57],[84,76,42,58,"triggerDate"],[84,87,42,69],[84,89,42,71],[84,95,42,77],[84,96,42,78],[84,98,42,80],[84,99,42,81],[85,8,43,4],[85,15,43,11,"notificationId"],[85,29,43,25],[86,6,44,2],[86,7,44,3],[86,8,44,4],[86,15,44,11,"error"],[86,20,44,16],[86,22,44,18],[87,8,45,4,"console"],[87,15,45,11],[87,16,45,12,"error"],[87,21,45,17],[87,22,45,18],[87,47,45,43],[87,49,45,45,"error"],[87,54,45,50],[87,55,45,51],[88,8,46,4],[88,15,46,11,"undefined"],[88,24,46,20],[89,6,47,2],[90,4,48,0],[90,5,48,1],[91,4,48,1],[91,20,20,13,"scheduleAlarmNotification"],[91,45,20,38,"scheduleAlarmNotification"],[91,46,20,38,"_x"],[91,48,20,38],[92,6,20,38],[92,13,20,38,"_ref"],[92,17,20,38],[92,18,20,38,"apply"],[92,23,20,38],[92,30,20,38,"arguments"],[92,39,20,38],[93,4,20,38],[94,2,20,38],[94,5,48,1],[95,2,50,7],[95,6,50,13,"cancelAlarmNotification"],[95,29,50,36],[96,4,50,36],[96,8,50,36,"_ref2"],[96,13,50,36],[96,20,50,36,"_asyncToGenerator"],[96,37,50,36],[96,38,50,36,"default"],[96,45,50,36],[96,47,50,39],[96,58,50,46,"alarmId"],[96,65,50,61],[96,67,50,81],[97,6,51,2],[97,10,51,6],[98,8,52,4],[98,12,52,10,"scheduledNotifications"],[98,34,52,32],[98,43,52,41,"Notifications"],[98,56,52,54],[98,57,52,55,"getAllScheduledNotificationsAsync"],[98,90,52,88],[98,91,52,89],[98,92,52,90],[99,8,54,4],[99,13,54,9],[99,17,54,15,"notification"],[99,29,54,27],[99,33,54,31,"scheduledNotifications"],[99,55,54,53],[99,57,54,55],[100,10,55,6],[100,14,55,10,"notification"],[100,26,55,22],[100,27,55,23,"content"],[100,34,55,30],[100,35,55,31,"data"],[100,39,55,35],[100,41,55,37,"alarmId"],[100,48,55,44],[100,53,55,49,"alarmId"],[100,60,55,56],[100,62,55,58],[101,12,56,8],[101,18,56,14,"Notifications"],[101,31,56,27],[101,32,56,28,"cancelScheduledNotificationAsync"],[101,64,56,60],[101,65,56,61,"notification"],[101,77,56,73],[101,78,56,74,"identifier"],[101,88,56,84],[101,89,56,85],[102,12,57,8,"console"],[102,19,57,15],[102,20,57,16,"log"],[102,23,57,19],[102,24,57,20],[102,60,57,56,"alarmId"],[102,67,57,63],[102,69,57,65],[102,70,57,66],[103,10,58,6],[104,8,59,4],[105,6,60,2],[105,7,60,3],[105,8,60,4],[105,15,60,11,"error"],[105,20,60,16],[105,22,60,18],[106,8,61,4,"console"],[106,15,61,11],[106,16,61,12,"error"],[106,21,61,17],[106,22,61,18],[106,47,61,43],[106,49,61,45,"error"],[106,54,61,50],[106,55,61,51],[107,6,62,2],[108,4,63,0],[108,5,63,1],[109,4,63,1],[109,20,50,13,"cancelAlarmNotification"],[109,43,50,36,"cancelAlarmNotification"],[109,44,50,36,"_x2"],[109,47,50,36],[110,6,50,36],[110,13,50,36,"_ref2"],[110,18,50,36],[110,19,50,36,"apply"],[110,24,50,36],[110,31,50,36,"arguments"],[110,40,50,36],[111,4,50,36],[112,2,50,36],[112,5,63,1],[113,2,65,7],[113,6,65,13,"cancelAllAlarms"],[113,21,65,28],[114,4,65,28],[114,8,65,28,"_ref3"],[114,13,65,28],[114,20,65,28,"_asyncToGenerator"],[114,37,65,28],[114,38,65,28,"default"],[114,45,65,28],[114,47,65,31],[114,60,65,58],[115,6,66,2],[115,10,66,6],[116,8,67,4],[116,14,67,10,"Notifications"],[116,27,67,23],[116,28,67,24,"cancelAllScheduledNotificationsAsync"],[116,64,67,60],[116,65,67,61],[116,66,67,62],[117,8,68,4,"console"],[117,15,68,11],[117,16,68,12,"log"],[117,19,68,15],[117,20,68,16],[117,42,68,38],[117,43,68,39],[118,6,69,2],[118,7,69,3],[118,8,69,4],[118,15,69,11,"error"],[118,20,69,16],[118,22,69,18],[119,8,70,4,"console"],[119,15,70,11],[119,16,70,12,"error"],[119,21,70,17],[119,22,70,18],[119,52,70,48],[119,54,70,50,"error"],[119,59,70,55],[119,60,70,56],[120,6,71,2],[121,4,72,0],[121,5,72,1],[122,4,72,1],[122,20,65,13,"cancelAllAlarms"],[122,35,65,28,"cancelAllAlarms"],[122,36,65,28],[123,6,65,28],[123,13,65,28,"_ref3"],[123,18,65,28],[123,19,65,28,"apply"],[123,24,65,28],[123,31,65,28,"arguments"],[123,40,65,28],[124,4,65,28],[125,2,65,28],[125,5,72,1],[126,0,72,2],[126,3]],"functionMap":{"names":["<global>","getNextTriggerTime","scheduleAlarmNotification","cancelAlarmNotification","cancelAllAlarms"],"mappings":"AAA;2BCK;CDY;yCEE;CF4B;uCGE;CHa;+BIE;CJO"},"hasCjsExports":false},"type":"js/module"}]}