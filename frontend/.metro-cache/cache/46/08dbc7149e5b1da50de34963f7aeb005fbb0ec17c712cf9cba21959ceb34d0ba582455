{"dependencies":[{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"date-fns","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":93},"end":{"line":3,"column":86,"index":179}}],"key":"ebLIABIqb+DSfRpTozlXmEt3BvY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"scheduleAlarmNotification\", {\n    enumerable: true,\n    get: function () {\n      return scheduleAlarmNotification;\n    }\n  });\n  Object.defineProperty(exports, \"cancelAlarmNotification\", {\n    enumerable: true,\n    get: function () {\n      return cancelAlarmNotification;\n    }\n  });\n  Object.defineProperty(exports, \"cancelAllAlarms\", {\n    enumerable: true,\n    get: function () {\n      return cancelAllAlarms;\n    }\n  });\n  var _expoNotifications = require(_dependencyMap[0], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _dateFns = require(_dependencyMap[1], \"date-fns\");\n  // Get next trigger time for alarm in IST\n  const getNextTriggerTime = alarm => {\n    const now = new Date();\n\n    // Create a date object for today with the alarm time\n    let triggerDate = (0, _dateFns.setSeconds)((0, _dateFns.setMinutes)((0, _dateFns.setHours)(now, alarm.hour), alarm.minute), 0);\n\n    // If the time has already passed today, schedule for tomorrow\n    if (!(0, _dateFns.isAfter)(triggerDate, now)) {\n      triggerDate = (0, _dateFns.addDays)(triggerDate, 1);\n    }\n    return triggerDate;\n  };\n  const scheduleAlarmNotification = async alarm => {\n    try {\n      const triggerDate = getNextTriggerTime(alarm);\n      const notificationId = await Notifications.scheduleNotificationAsync({\n        content: {\n          title: alarm.label || 'Alarm',\n          body: 'Time to wake up! Type \"yes i am awake\" to stop.',\n          sound: true,\n          priority: Notifications.AndroidNotificationPriority.MAX,\n          vibrate: [0, 250, 250, 250],\n          data: {\n            alarmId: alarm.id,\n            type: 'alarm'\n          }\n        },\n        trigger: triggerDate\n      });\n      console.log(`Alarm ${alarm.id} scheduled for ${(0, _dateFns.format)(triggerDate, 'PPpp')}`);\n      return notificationId;\n    } catch (error) {\n      console.error('Error scheduling alarm:', error);\n      return undefined;\n    }\n  };\n  const cancelAlarmNotification = async alarmId => {\n    try {\n      const scheduledNotifications = await Notifications.getAllScheduledNotificationsAsync();\n      for (const notification of scheduledNotifications) {\n        if (notification.content.data?.alarmId === alarmId) {\n          await Notifications.cancelScheduledNotificationAsync(notification.identifier);\n          console.log(`Cancelled notification for alarm ${alarmId}`);\n        }\n      }\n    } catch (error) {\n      console.error('Error cancelling alarm:', error);\n    }\n  };\n  const cancelAllAlarms = async () => {\n    try {\n      await Notifications.cancelAllScheduledNotificationsAsync();\n      console.log('All alarms cancelled');\n    } catch (error) {\n      console.error('Error cancelling all alarms:', error);\n    }\n  };\n});","lineCount":101,"map":[[22,2,20,0,"Object"],[22,8,20,0],[22,9,20,0,"defineProperty"],[22,23,20,0],[22,24,20,0,"exports"],[22,31,20,0],[23,4,20,0,"enumerable"],[23,14,20,0],[24,4,20,0,"get"],[24,7,20,0],[24,18,20,0,"get"],[24,19,20,0],[25,6,20,0],[25,13,20,0,"scheduleAlarmNotification"],[25,38,20,0],[26,4,20,0],[27,2,20,0],[28,2,47,0,"Object"],[28,8,47,0],[28,9,47,0,"defineProperty"],[28,23,47,0],[28,24,47,0,"exports"],[28,31,47,0],[29,4,47,0,"enumerable"],[29,14,47,0],[30,4,47,0,"get"],[30,7,47,0],[30,18,47,0,"get"],[30,19,47,0],[31,6,47,0],[31,13,47,0,"cancelAlarmNotification"],[31,36,47,0],[32,4,47,0],[33,2,47,0],[34,2,62,0,"Object"],[34,8,62,0],[34,9,62,0,"defineProperty"],[34,23,62,0],[34,24,62,0,"exports"],[34,31,62,0],[35,4,62,0,"enumerable"],[35,14,62,0],[36,4,62,0,"get"],[36,7,62,0],[36,18,62,0,"get"],[36,19,62,0],[37,6,62,0],[37,13,62,0,"cancelAllAlarms"],[37,28,62,0],[38,4,62,0],[39,2,62,0],[40,2,1,0],[40,6,1,0,"_expoNotifications"],[40,24,1,0],[40,27,1,0,"require"],[40,34,1,0],[40,35,1,0,"_dependencyMap"],[40,49,1,0],[41,2,1,0],[41,6,1,0,"Notifications"],[41,19,1,0],[41,22,1,0,"_interopNamespace"],[41,39,1,0],[41,40,1,0,"_expoNotifications"],[41,58,1,0],[42,2,3,0],[42,6,3,0,"_dateFns"],[42,14,3,0],[42,17,3,0,"require"],[42,24,3,0],[42,25,3,0,"_dependencyMap"],[42,39,3,0],[43,2,5,0],[44,2,6,0],[44,8,6,6,"getNextTriggerTime"],[44,26,6,24],[44,29,6,28,"alarm"],[44,34,6,40],[44,38,6,51],[45,4,7,2],[45,10,7,8,"now"],[45,13,7,11],[45,16,7,14],[45,20,7,18,"Date"],[45,24,7,22],[45,25,7,23],[45,26,7,24],[47,4,9,2],[48,4,10,2],[48,8,10,6,"triggerDate"],[48,19,10,17],[48,22,10,20],[48,26,10,20,"setSeconds"],[48,34,10,30],[48,35,10,30,"setSeconds"],[48,45,10,30],[48,47,10,31],[48,51,10,31,"setMinutes"],[48,59,10,41],[48,60,10,41,"setMinutes"],[48,70,10,41],[48,72,10,42],[48,76,10,42,"setHours"],[48,84,10,50],[48,85,10,50,"setHours"],[48,93,10,50],[48,95,10,51,"now"],[48,98,10,54],[48,100,10,56,"alarm"],[48,105,10,61],[48,106,10,62,"hour"],[48,110,10,66],[48,111,10,67],[48,113,10,69,"alarm"],[48,118,10,74],[48,119,10,75,"minute"],[48,125,10,81],[48,126,10,82],[48,128,10,84],[48,129,10,85],[48,130,10,86],[50,4,12,2],[51,4,13,2],[51,8,13,6],[51,9,13,7],[51,13,13,7,"isAfter"],[51,21,13,14],[51,22,13,14,"isAfter"],[51,29,13,14],[51,31,13,15,"triggerDate"],[51,42,13,26],[51,44,13,28,"now"],[51,47,13,31],[51,48,13,32],[51,50,13,34],[52,6,14,4,"triggerDate"],[52,17,14,15],[52,20,14,18],[52,24,14,18,"addDays"],[52,32,14,25],[52,33,14,25,"addDays"],[52,40,14,25],[52,42,14,26,"triggerDate"],[52,53,14,37],[52,55,14,39],[52,56,14,40],[52,57,14,41],[53,4,15,2],[54,4,17,2],[54,11,17,9,"triggerDate"],[54,22,17,20],[55,2,18,0],[55,3,18,1],[56,2,20,7],[56,8,20,13,"scheduleAlarmNotification"],[56,33,20,38],[56,36,20,41],[56,42,20,48,"alarm"],[56,47,20,60],[56,51,20,94],[57,4,21,2],[57,8,21,6],[58,6,22,4],[58,12,22,10,"triggerDate"],[58,23,22,21],[58,26,22,24,"getNextTriggerTime"],[58,44,22,42],[58,45,22,43,"alarm"],[58,50,22,48],[58,51,22,49],[59,6,24,4],[59,12,24,10,"notificationId"],[59,26,24,24],[59,29,24,27],[59,35,24,33,"Notifications"],[59,48,24,46],[59,49,24,47,"scheduleNotificationAsync"],[59,74,24,72],[59,75,24,73],[60,8,25,6,"content"],[60,15,25,13],[60,17,25,15],[61,10,26,8,"title"],[61,15,26,13],[61,17,26,15,"alarm"],[61,22,26,20],[61,23,26,21,"label"],[61,28,26,26],[61,32,26,30],[61,39,26,37],[62,10,27,8,"body"],[62,14,27,12],[62,16,27,14],[62,65,27,63],[63,10,28,8,"sound"],[63,15,28,13],[63,17,28,15],[63,21,28,19],[64,10,29,8,"priority"],[64,18,29,16],[64,20,29,18,"Notifications"],[64,33,29,31],[64,34,29,32,"AndroidNotificationPriority"],[64,61,29,59],[64,62,29,60,"MAX"],[64,65,29,63],[65,10,30,8,"vibrate"],[65,17,30,15],[65,19,30,17],[65,20,30,18],[65,21,30,19],[65,23,30,21],[65,26,30,24],[65,28,30,26],[65,31,30,29],[65,33,30,31],[65,36,30,34],[65,37,30,35],[66,10,31,8,"data"],[66,14,31,12],[66,16,31,14],[67,12,32,10,"alarmId"],[67,19,32,17],[67,21,32,19,"alarm"],[67,26,32,24],[67,27,32,25,"id"],[67,29,32,27],[68,12,33,10,"type"],[68,16,33,14],[68,18,33,16],[69,10,34,8],[70,8,35,6],[70,9,35,7],[71,8,36,6,"trigger"],[71,15,36,13],[71,17,36,15,"triggerDate"],[72,6,37,4],[72,7,37,5],[72,8,37,6],[73,6,39,4,"console"],[73,13,39,11],[73,14,39,12,"log"],[73,17,39,15],[73,18,39,16],[73,27,39,25,"alarm"],[73,32,39,30],[73,33,39,31,"id"],[73,35,39,33],[73,53,39,51],[73,57,39,51,"format"],[73,65,39,57],[73,66,39,57,"format"],[73,72,39,57],[73,74,39,58,"triggerDate"],[73,85,39,69],[73,87,39,71],[73,93,39,77],[73,94,39,78],[73,96,39,80],[73,97,39,81],[74,6,40,4],[74,13,40,11,"notificationId"],[74,27,40,25],[75,4,41,2],[75,5,41,3],[75,6,41,4],[75,13,41,11,"error"],[75,18,41,16],[75,20,41,18],[76,6,42,4,"console"],[76,13,42,11],[76,14,42,12,"error"],[76,19,42,17],[76,20,42,18],[76,45,42,43],[76,47,42,45,"error"],[76,52,42,50],[76,53,42,51],[77,6,43,4],[77,13,43,11,"undefined"],[77,22,43,20],[78,4,44,2],[79,2,45,0],[79,3,45,1],[80,2,47,7],[80,8,47,13,"cancelAlarmNotification"],[80,31,47,36],[80,34,47,39],[80,40,47,46,"alarmId"],[80,47,47,61],[80,51,47,81],[81,4,48,2],[81,8,48,6],[82,6,49,4],[82,12,49,10,"scheduledNotifications"],[82,34,49,32],[82,37,49,35],[82,43,49,41,"Notifications"],[82,56,49,54],[82,57,49,55,"getAllScheduledNotificationsAsync"],[82,90,49,88],[82,91,49,89],[82,92,49,90],[83,6,51,4],[83,11,51,9],[83,17,51,15,"notification"],[83,29,51,27],[83,33,51,31,"scheduledNotifications"],[83,55,51,53],[83,57,51,55],[84,8,52,6],[84,12,52,10,"notification"],[84,24,52,22],[84,25,52,23,"content"],[84,32,52,30],[84,33,52,31,"data"],[84,37,52,35],[84,39,52,37,"alarmId"],[84,46,52,44],[84,51,52,49,"alarmId"],[84,58,52,56],[84,60,52,58],[85,10,53,8],[85,16,53,14,"Notifications"],[85,29,53,27],[85,30,53,28,"cancelScheduledNotificationAsync"],[85,62,53,60],[85,63,53,61,"notification"],[85,75,53,73],[85,76,53,74,"identifier"],[85,86,53,84],[85,87,53,85],[86,10,54,8,"console"],[86,17,54,15],[86,18,54,16,"log"],[86,21,54,19],[86,22,54,20],[86,58,54,56,"alarmId"],[86,65,54,63],[86,67,54,65],[86,68,54,66],[87,8,55,6],[88,6,56,4],[89,4,57,2],[89,5,57,3],[89,6,57,4],[89,13,57,11,"error"],[89,18,57,16],[89,20,57,18],[90,6,58,4,"console"],[90,13,58,11],[90,14,58,12,"error"],[90,19,58,17],[90,20,58,18],[90,45,58,43],[90,47,58,45,"error"],[90,52,58,50],[90,53,58,51],[91,4,59,2],[92,2,60,0],[92,3,60,1],[93,2,62,7],[93,8,62,13,"cancelAllAlarms"],[93,23,62,28],[93,26,62,31],[93,32,62,31,"cancelAllAlarms"],[93,33,62,31],[93,38,62,58],[94,4,63,2],[94,8,63,6],[95,6,64,4],[95,12,64,10,"Notifications"],[95,25,64,23],[95,26,64,24,"cancelAllScheduledNotificationsAsync"],[95,62,64,60],[95,63,64,61],[95,64,64,62],[96,6,65,4,"console"],[96,13,65,11],[96,14,65,12,"log"],[96,17,65,15],[96,18,65,16],[96,40,65,38],[96,41,65,39],[97,4,66,2],[97,5,66,3],[97,6,66,4],[97,13,66,11,"error"],[97,18,66,16],[97,20,66,18],[98,6,67,4,"console"],[98,13,67,11],[98,14,67,12,"error"],[98,19,67,17],[98,20,67,18],[98,50,67,48],[98,52,67,50,"error"],[98,57,67,55],[98,58,67,56],[99,4,68,2],[100,2,69,0],[100,3,69,1],[101,0,69,2],[101,3]],"functionMap":{"names":["<global>","getNextTriggerTime","scheduleAlarmNotification","cancelAlarmNotification","cancelAllAlarms"],"mappings":"AAA;2BCK;CDY;yCEE;CFyB;uCGE;CHa;+BIE;CJO"},"hasCjsExports":false},"type":"js/module"}]}