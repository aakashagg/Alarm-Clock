{"dependencies":[{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"date-fns","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":93},"end":{"line":3,"column":86,"index":179}}],"key":"ebLIABIqb+DSfRpTozlXmEt3BvY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"scheduleAlarmNotification\", {\n    enumerable: true,\n    get: function () {\n      return scheduleAlarmNotification;\n    }\n  });\n  Object.defineProperty(exports, \"cancelAlarmNotification\", {\n    enumerable: true,\n    get: function () {\n      return cancelAlarmNotification;\n    }\n  });\n  Object.defineProperty(exports, \"cancelAllAlarms\", {\n    enumerable: true,\n    get: function () {\n      return cancelAllAlarms;\n    }\n  });\n  var _expoNotifications = require(_dependencyMap[0], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _dateFns = require(_dependencyMap[1], \"date-fns\");\n  // Get next trigger time for alarm in IST\n  const getNextTriggerTime = alarm => {\n    const now = new Date();\n\n    // Create a date object for today with the alarm time\n    let triggerDate = (0, _dateFns.setSeconds)((0, _dateFns.setMinutes)((0, _dateFns.setHours)(now, alarm.hour), alarm.minute), 0);\n\n    // If the time has already passed today, schedule for tomorrow\n    if (!(0, _dateFns.isAfter)(triggerDate, now)) {\n      triggerDate = (0, _dateFns.addDays)(triggerDate, 1);\n    }\n    return triggerDate;\n  };\n  const scheduleAlarmNotification = async alarm => {\n    try {\n      const triggerDate = getNextTriggerTime(alarm);\n      const notificationId = await Notifications.scheduleNotificationAsync({\n        content: {\n          title: alarm.label || 'Alarm',\n          body: 'Time to wake up! Type \"yes i am awake\" to stop.',\n          sound: true,\n          priority: Notifications.AndroidNotificationPriority.MAX,\n          vibrate: [0, 250, 250, 250],\n          data: {\n            alarmId: alarm.id,\n            type: 'alarm'\n          }\n        },\n        trigger: {\n          date: triggerDate,\n          channelId: 'alarm'\n        }\n      });\n      console.log(`Alarm ${alarm.id} scheduled for ${(0, _dateFns.format)(triggerDate, 'PPpp')}`);\n      return notificationId;\n    } catch (error) {\n      console.error('Error scheduling alarm:', error);\n      return undefined;\n    }\n  };\n  const cancelAlarmNotification = async alarmId => {\n    try {\n      const scheduledNotifications = await Notifications.getAllScheduledNotificationsAsync();\n      for (const notification of scheduledNotifications) {\n        if (notification.content.data?.alarmId === alarmId) {\n          await Notifications.cancelScheduledNotificationAsync(notification.identifier);\n          console.log(`Cancelled notification for alarm ${alarmId}`);\n        }\n      }\n    } catch (error) {\n      console.error('Error cancelling alarm:', error);\n    }\n  };\n  const cancelAllAlarms = async () => {\n    try {\n      await Notifications.cancelAllScheduledNotificationsAsync();\n      console.log('All alarms cancelled');\n    } catch (error) {\n      console.error('Error cancelling all alarms:', error);\n    }\n  };\n});","lineCount":104,"map":[[22,2,20,0,"Object"],[22,8,20,0],[22,9,20,0,"defineProperty"],[22,23,20,0],[22,24,20,0,"exports"],[22,31,20,0],[23,4,20,0,"enumerable"],[23,14,20,0],[24,4,20,0,"get"],[24,7,20,0],[24,18,20,0,"get"],[24,19,20,0],[25,6,20,0],[25,13,20,0,"scheduleAlarmNotification"],[25,38,20,0],[26,4,20,0],[27,2,20,0],[28,2,50,0,"Object"],[28,8,50,0],[28,9,50,0,"defineProperty"],[28,23,50,0],[28,24,50,0,"exports"],[28,31,50,0],[29,4,50,0,"enumerable"],[29,14,50,0],[30,4,50,0,"get"],[30,7,50,0],[30,18,50,0,"get"],[30,19,50,0],[31,6,50,0],[31,13,50,0,"cancelAlarmNotification"],[31,36,50,0],[32,4,50,0],[33,2,50,0],[34,2,65,0,"Object"],[34,8,65,0],[34,9,65,0,"defineProperty"],[34,23,65,0],[34,24,65,0,"exports"],[34,31,65,0],[35,4,65,0,"enumerable"],[35,14,65,0],[36,4,65,0,"get"],[36,7,65,0],[36,18,65,0,"get"],[36,19,65,0],[37,6,65,0],[37,13,65,0,"cancelAllAlarms"],[37,28,65,0],[38,4,65,0],[39,2,65,0],[40,2,1,0],[40,6,1,0,"_expoNotifications"],[40,24,1,0],[40,27,1,0,"require"],[40,34,1,0],[40,35,1,0,"_dependencyMap"],[40,49,1,0],[41,2,1,0],[41,6,1,0,"Notifications"],[41,19,1,0],[41,22,1,0,"_interopNamespace"],[41,39,1,0],[41,40,1,0,"_expoNotifications"],[41,58,1,0],[42,2,3,0],[42,6,3,0,"_dateFns"],[42,14,3,0],[42,17,3,0,"require"],[42,24,3,0],[42,25,3,0,"_dependencyMap"],[42,39,3,0],[43,2,5,0],[44,2,6,0],[44,8,6,6,"getNextTriggerTime"],[44,26,6,24],[44,29,6,28,"alarm"],[44,34,6,40],[44,38,6,51],[45,4,7,2],[45,10,7,8,"now"],[45,13,7,11],[45,16,7,14],[45,20,7,18,"Date"],[45,24,7,22],[45,25,7,23],[45,26,7,24],[47,4,9,2],[48,4,10,2],[48,8,10,6,"triggerDate"],[48,19,10,17],[48,22,10,20],[48,26,10,20,"setSeconds"],[48,34,10,30],[48,35,10,30,"setSeconds"],[48,45,10,30],[48,47,10,31],[48,51,10,31,"setMinutes"],[48,59,10,41],[48,60,10,41,"setMinutes"],[48,70,10,41],[48,72,10,42],[48,76,10,42,"setHours"],[48,84,10,50],[48,85,10,50,"setHours"],[48,93,10,50],[48,95,10,51,"now"],[48,98,10,54],[48,100,10,56,"alarm"],[48,105,10,61],[48,106,10,62,"hour"],[48,110,10,66],[48,111,10,67],[48,113,10,69,"alarm"],[48,118,10,74],[48,119,10,75,"minute"],[48,125,10,81],[48,126,10,82],[48,128,10,84],[48,129,10,85],[48,130,10,86],[50,4,12,2],[51,4,13,2],[51,8,13,6],[51,9,13,7],[51,13,13,7,"isAfter"],[51,21,13,14],[51,22,13,14,"isAfter"],[51,29,13,14],[51,31,13,15,"triggerDate"],[51,42,13,26],[51,44,13,28,"now"],[51,47,13,31],[51,48,13,32],[51,50,13,34],[52,6,14,4,"triggerDate"],[52,17,14,15],[52,20,14,18],[52,24,14,18,"addDays"],[52,32,14,25],[52,33,14,25,"addDays"],[52,40,14,25],[52,42,14,26,"triggerDate"],[52,53,14,37],[52,55,14,39],[52,56,14,40],[52,57,14,41],[53,4,15,2],[54,4,17,2],[54,11,17,9,"triggerDate"],[54,22,17,20],[55,2,18,0],[55,3,18,1],[56,2,20,7],[56,8,20,13,"scheduleAlarmNotification"],[56,33,20,38],[56,36,20,41],[56,42,20,48,"alarm"],[56,47,20,60],[56,51,20,94],[57,4,21,2],[57,8,21,6],[58,6,22,4],[58,12,22,10,"triggerDate"],[58,23,22,21],[58,26,22,24,"getNextTriggerTime"],[58,44,22,42],[58,45,22,43,"alarm"],[58,50,22,48],[58,51,22,49],[59,6,24,4],[59,12,24,10,"notificationId"],[59,26,24,24],[59,29,24,27],[59,35,24,33,"Notifications"],[59,48,24,46],[59,49,24,47,"scheduleNotificationAsync"],[59,74,24,72],[59,75,24,73],[60,8,25,6,"content"],[60,15,25,13],[60,17,25,15],[61,10,26,8,"title"],[61,15,26,13],[61,17,26,15,"alarm"],[61,22,26,20],[61,23,26,21,"label"],[61,28,26,26],[61,32,26,30],[61,39,26,37],[62,10,27,8,"body"],[62,14,27,12],[62,16,27,14],[62,65,27,63],[63,10,28,8,"sound"],[63,15,28,13],[63,17,28,15],[63,21,28,19],[64,10,29,8,"priority"],[64,18,29,16],[64,20,29,18,"Notifications"],[64,33,29,31],[64,34,29,32,"AndroidNotificationPriority"],[64,61,29,59],[64,62,29,60,"MAX"],[64,65,29,63],[65,10,30,8,"vibrate"],[65,17,30,15],[65,19,30,17],[65,20,30,18],[65,21,30,19],[65,23,30,21],[65,26,30,24],[65,28,30,26],[65,31,30,29],[65,33,30,31],[65,36,30,34],[65,37,30,35],[66,10,31,8,"data"],[66,14,31,12],[66,16,31,14],[67,12,32,10,"alarmId"],[67,19,32,17],[67,21,32,19,"alarm"],[67,26,32,24],[67,27,32,25,"id"],[67,29,32,27],[68,12,33,10,"type"],[68,16,33,14],[68,18,33,16],[69,10,34,8],[70,8,35,6],[70,9,35,7],[71,8,36,6,"trigger"],[71,15,36,13],[71,17,36,15],[72,10,37,8,"date"],[72,14,37,12],[72,16,37,14,"triggerDate"],[72,27,37,25],[73,10,38,8,"channelId"],[73,19,38,17],[73,21,38,19],[74,8,39,6],[75,6,40,4],[75,7,40,5],[75,8,40,6],[76,6,42,4,"console"],[76,13,42,11],[76,14,42,12,"log"],[76,17,42,15],[76,18,42,16],[76,27,42,25,"alarm"],[76,32,42,30],[76,33,42,31,"id"],[76,35,42,33],[76,53,42,51],[76,57,42,51,"format"],[76,65,42,57],[76,66,42,57,"format"],[76,72,42,57],[76,74,42,58,"triggerDate"],[76,85,42,69],[76,87,42,71],[76,93,42,77],[76,94,42,78],[76,96,42,80],[76,97,42,81],[77,6,43,4],[77,13,43,11,"notificationId"],[77,27,43,25],[78,4,44,2],[78,5,44,3],[78,6,44,4],[78,13,44,11,"error"],[78,18,44,16],[78,20,44,18],[79,6,45,4,"console"],[79,13,45,11],[79,14,45,12,"error"],[79,19,45,17],[79,20,45,18],[79,45,45,43],[79,47,45,45,"error"],[79,52,45,50],[79,53,45,51],[80,6,46,4],[80,13,46,11,"undefined"],[80,22,46,20],[81,4,47,2],[82,2,48,0],[82,3,48,1],[83,2,50,7],[83,8,50,13,"cancelAlarmNotification"],[83,31,50,36],[83,34,50,39],[83,40,50,46,"alarmId"],[83,47,50,61],[83,51,50,81],[84,4,51,2],[84,8,51,6],[85,6,52,4],[85,12,52,10,"scheduledNotifications"],[85,34,52,32],[85,37,52,35],[85,43,52,41,"Notifications"],[85,56,52,54],[85,57,52,55,"getAllScheduledNotificationsAsync"],[85,90,52,88],[85,91,52,89],[85,92,52,90],[86,6,54,4],[86,11,54,9],[86,17,54,15,"notification"],[86,29,54,27],[86,33,54,31,"scheduledNotifications"],[86,55,54,53],[86,57,54,55],[87,8,55,6],[87,12,55,10,"notification"],[87,24,55,22],[87,25,55,23,"content"],[87,32,55,30],[87,33,55,31,"data"],[87,37,55,35],[87,39,55,37,"alarmId"],[87,46,55,44],[87,51,55,49,"alarmId"],[87,58,55,56],[87,60,55,58],[88,10,56,8],[88,16,56,14,"Notifications"],[88,29,56,27],[88,30,56,28,"cancelScheduledNotificationAsync"],[88,62,56,60],[88,63,56,61,"notification"],[88,75,56,73],[88,76,56,74,"identifier"],[88,86,56,84],[88,87,56,85],[89,10,57,8,"console"],[89,17,57,15],[89,18,57,16,"log"],[89,21,57,19],[89,22,57,20],[89,58,57,56,"alarmId"],[89,65,57,63],[89,67,57,65],[89,68,57,66],[90,8,58,6],[91,6,59,4],[92,4,60,2],[92,5,60,3],[92,6,60,4],[92,13,60,11,"error"],[92,18,60,16],[92,20,60,18],[93,6,61,4,"console"],[93,13,61,11],[93,14,61,12,"error"],[93,19,61,17],[93,20,61,18],[93,45,61,43],[93,47,61,45,"error"],[93,52,61,50],[93,53,61,51],[94,4,62,2],[95,2,63,0],[95,3,63,1],[96,2,65,7],[96,8,65,13,"cancelAllAlarms"],[96,23,65,28],[96,26,65,31],[96,32,65,31,"cancelAllAlarms"],[96,33,65,31],[96,38,65,58],[97,4,66,2],[97,8,66,6],[98,6,67,4],[98,12,67,10,"Notifications"],[98,25,67,23],[98,26,67,24,"cancelAllScheduledNotificationsAsync"],[98,62,67,60],[98,63,67,61],[98,64,67,62],[99,6,68,4,"console"],[99,13,68,11],[99,14,68,12,"log"],[99,17,68,15],[99,18,68,16],[99,40,68,38],[99,41,68,39],[100,4,69,2],[100,5,69,3],[100,6,69,4],[100,13,69,11,"error"],[100,18,69,16],[100,20,69,18],[101,6,70,4,"console"],[101,13,70,11],[101,14,70,12,"error"],[101,19,70,17],[101,20,70,18],[101,50,70,48],[101,52,70,50,"error"],[101,57,70,55],[101,58,70,56],[102,4,71,2],[103,2,72,0],[103,3,72,1],[104,0,72,2],[104,3]],"functionMap":{"names":["<global>","getNextTriggerTime","scheduleAlarmNotification","cancelAlarmNotification","cancelAllAlarms"],"mappings":"AAA;2BCK;CDY;yCEE;CF4B;uCGE;CHa;+BIE;CJO"},"hasCjsExports":false},"type":"js/module"}]}